<!doctype html><html lang=en class="js csstransforms3d"><head><script></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=referrer content="no-referrer-when-downgrade"><meta property="og:image" content="https://docs.rhize.com//images/rhize-logo.png"><meta property="og:type" content="website"><meta property="og:title" content><meta property="og:site_name" content><meta property="og:url" content="https://docs.rhize.com/how-to/gql/filter/"><meta property="og:locale" content="en"><meta name=generator content="Hugo 0.123.4"><meta name=description content="How to filter a GraphQL call to a subset of manufacturing items."><link rel=canonical href=https://docs.rhize.com/how-to/gql/filter/><link rel=apple-touch-icon sizes=57x57 href=https://docs.rhize.com/images/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=https://docs.rhize.com/images/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=https://docs.rhize.com/images/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=https://docs.rhize.com/images/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=https://docs.rhize.com/images/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=https://docs.rhize.com/images/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=https://docs.rhize.com/images/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=https://docs.rhize.com/images/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=https://docs.rhize.com/images/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=https://docs.rhize.com/images/favicons/manifest.webmanifest><link rel=mask-icon href=https://docs.rhize.com/images/favicons/safari-pinned-tab.svg color=#fe2c06><link rel="shortcut icon" href=https://docs.rhize.com/images/favicons/favicon.ico><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js></script><script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/go.min.js></script><script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/java.min.js integrity="sha256-RyOs5MjQ+Ef9DQrPHp4QGr2tcNjxLh6mCkkW+sS4doU=" crossorigin=anonymous></script><script src=//code.jquery.com/jquery-3.2.1.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.js integrity="sha256-x3BtPVERvw1ozPlwivuFLZoViFCeAAs1Gt6SxEedmo8=" crossorigin=anonymous></script><link href=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.css rel=stylesheet integrity="sha256-7sZe9dsqyNZC9Mk+WPRB7nVvPPPXyorzm2QKqlgXC4k=" crossorigin=anonymous><script async src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/addon/edit/closebrackets.min.js integrity="sha256-qhu2a7DSpQaammMaLw1iruxBpxmgdw8mdQaQWQUokcY=" crossorigin=anonymous></script><script async src=//cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/javascript/javascript.min.js integrity="sha256-7Bdg/UdDMmHDPafpQDYZNPCEbnRP7eAvu+2hEoqRCXs=" crossorigin=anonymous></script><title>Filter
|
How to
</title><link href=https://docs.rhize.com/css/theme.css?f7fc3416d6b064b68fd74e754bb7e584 rel=stylesheet><link href=https://docs.rhize.com/css/runnable.css?46648956d99faa2e057d109b9f2a52e6 rel=stylesheet><link href=https://docs.rhize.com/css/tabs.css?035edc32762cb7973b740e3067101ced rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css rel=stylesheet integrity=sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ crossorigin=anonymous><script src=//cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js integrity=sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb crossorigin=anonymous></script><script src=//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js integrity=sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn crossorigin=anonymous></script><link href="//fonts.googleapis.com/css?family=Lato:400,700" rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link href=https://cdn.lineicons.com/2.0/LineIcons.css rel=stylesheet crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3></head><body><nav id=header><div class=header-left><div><a href=https://docs.rhize.com/ class=brand><img src=https://docs.rhize.com//images/rhize-logo.png alt=RHIZE class=logo></a><div class=logo-tagline><span>Documentation</span></div></div></div><div class=header-right><div id=docsearch><div class="menu-search align-middle"><div id=docsearch></div></div></div><div><ul class=menu><li><a href=https://rhize.com target=_blank>Home</a></li><li><a href=https://discord.gg/ZRpUBXmrkV target=_blank>Community</a></li><li><a href=https://github.com/libremfg/libremfg.github.io target=_blank>GitHub</a></li></ul></div></div><a href=# id=sidebar-toggle><i class="fa fa-bars"></i></a></nav><aside id=sidebar><ul class=topics><li class="topic main-topic children"><a id=get-started href=#>Get started</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/get-started/introduction/>What is Rhize?</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/get-started/how-rhize-works/>How Rhize works</a></li></ul></li><li class="topic main-topic children"><a id=deploy href=#>Deploy</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=#>Install</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/overview/>Overview</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/setup-kubernetes/>Set up Kubernetes</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/keycloak/>Configure Keycloak</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/services/>Install Rhize services</a></li></ul></li><li class="topic sub-topic"><a href=#>Back up</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/graphdb/>Back up the Graph DB</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/grafana/>Back up Grafana</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/keycloak/>Back up Keycloak</a></li></ul></li><li class="topic sub-topic"><a href=#>Restore</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/graphdb/>Restore the GraphDB</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/grafana/>Restore Grafana</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/keycloak/>Restore Keycloak</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/bpmn-nodes/>BPMN execution recovery</a></li></ul></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/upgrade/>Upgrade</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/about-openidconnect/>About OpenID connect</a></li></ul></li><li class="topic main-topic children active"><a id=user-guides href=#>User guides</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=#>Define production models</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/model/create-objects-ui/>Create objects from the UI</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/model/master-definitions/>Master definitions and fields</a></li></ul></li><li class="topic sub-topic"><a href=#>Connect process events</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/publish-subscribe/connect-datasource/>Connect data source</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/publish-subscribe/track-changes/>Track changes (CDC)</a></li></ul></li><li class="topic sub-topic"><a href=#>Use BPMN to handle events</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/create-workflow/>Create workflows</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/tune-performance/>Tune performance</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/>BMPN elements</a></li></ul></li><li class="topic sub-topic active"><a href=#>Use GraphQL</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/call-the-graphql-api/>Overview: the Rhize API</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/query/>Query</a></li><li class="topic sub-topic active"><a href=https://docs.rhize.com/how-to/gql/filter/>Filter</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/mutate/>Mutate</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/subscribe/>Subscribe</a></li></ul></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/audit/>Audit</a></li></ul></li><li class="topic main-topic children"><a id=use-cases href=#>Use cases</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/use-cases/overview/>Overview</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/use-cases/ebr/>Electronic batch records</a></li></ul></li><li class="topic main-topic children"><a id=reference href=#>Reference</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/agent-configuration/>Agent configuration</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/default-ports/>Default local ports</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/gql-types/>GQL types and filters</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/glossary/>Glossary</a></li></ul></li><li class="topic main-topic children"><a id=concepts href=#>Concepts</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/concepts/manufacturing-data-hub/>Manufacturing Data Hub</a></li></ul></li><li class="topic main-topic children"><a id=releases href=#>Releases</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/3-0-0rc08/>3.0.0rc08</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/3-0-0rc07/>3.0.0rc07</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/3-0-0rc06/>3.0.0rc06</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/3-0-0rc05/>3.0.0rc05</a></li></ul></li><li class="topic main-topic"><a href=https://docs.rhize.com/></a></li></ul></aside><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script><script type=text/javascript>docsearch({appId:"70JLDGIDQA",apiKey:"2b4c57aa9d3d0386bf1a6df5b54eb3cf",indexName:"rhize",insights:!0,container:"#docsearch",debug:!1})</script></body></html><main class=content-wrapper><div class=content><div class=top-toc><nav id=TableOfContents><ul><li><a href=#filter-by-property>Filter by property</a><ul><li><a href=#between-dates><code>between</code> dates</a></li><li><a href=#has-property><code>has</code> property</a></li><li><a href=#in-this-subset><code>in</code> this subset</a></li><li><a href=#regexp><code>regexp</code></a></li></ul></li><li><a href=#combine-filters-with-and-or-not>Combine filters with <code>and</code>, <code>or</code>, <code>not</code></a><ul><li><a href=#this-and-that-property>this <code>and</code> that property</a></li><li><a href=#one-or-more-properties>One <code>or</code> more properties</a></li><li><a href=#not-these-properties><code>not</code> these properties</a></li><li><a href=#this-list-of-filters>This list of filters</a></li></ul></li><li><a href=#use-directives>Use directives</a><ul><li><a href=#cascade>Cascade</a></li><li><a href=#include>Include</a></li></ul></li></ul></nav></div><article><a class=edit-btn target=_blank href=https://github.com/libremfg/libremfg.github.io/edit/main/content/how-to/gql/filter.md><i class="fa fa-github-alt"></i> Edit Page</a><h1 class=post-title>Filter</h1><p><em>Filters</em> limit an operation to a subset of resources.
You can use filters to make operations more precise, remove unneeded items from a payload, and reduce the need for secondary processing.</p><p>To use a filter, specify it in the operation&rsquo;s argument.
Most fields in an object can serve as a filter.<div class="notices note"><span class=type>Note</span> This page provides a detailed guide of how to use the filters, with examples.
For a bare reference of filters and data types, refer to the <a href=https://docs.rhize.com/reference/gql-types/>GraphQL type reference</a>.</div></p><h2 id=filter-by-property>Filter by property</h2><p>The following sections show some common <a href=https://docs.rhize.com/reference/gql-types/#scalar-filters>scalar filters</a>, filters that work on <code>string</code>, <code>dateTime</code>, and numeric values.
These filters return only the resources that have some specified property or property range.</p><h3 id=between-dates><code>between</code> dates</h3><p>The <code>between</code> property returns items within time ranges for a specific property.
This query returns job responses that started between January 01, 2023 and January 05, 2023.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>queryJobResponse</span>(
</span></span><span style=display:flex><span>    filter: {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>effectiveStart</span>: { <span style=color:#2b91af>between</span>: { <span style=color:#2b91af>min</span>: <span style=color:#a31515>&#34;2023-01-01&#34;</span>, <span style=color:#2b91af>max</span>: <span style=color:#a31515>&#34;2023-01-05&#34;</span> } }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>id</span>
</span></span><span style=display:flex><span>    effectiveStart
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=has-property><code>has</code> property</h3><p>The <code>has</code> keyword returns results only if an item has the specified field.
For example, this query returns only equipment items that have been modified at least once.</p><div class=tabs><ul class="nav nav-tabs"></ul><div class=tab-content><div class=tab-pane title=QUERY><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> <span style=color:#2b91af>QueryEquipment</span> {
</span></span><span style=display:flex><span>  <span style=color:#00f>query</span><span style=color:#2b91af>Equipment</span>(filter: {<span style=color:#2b91af>has</span>: <span style=color:#2b91af>_modifiedOn</span>}) {
</span></span><span style=display:flex><span>    id
</span></span><span style=display:flex><span>    _createdOn
</span></span><span style=display:flex><span>    _modifiedOn
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=tab-pane title=RESPONSE><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;data&#34;: {
</span></span><span style=display:flex><span>    &#34;queryEquipment&#34;: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        &#34;id&#34;: <span style=color:#a31515>&#34;AN-19670-Equipment-1&#34;</span>,
</span></span><span style=display:flex><span>        &#34;_createdOn&#34;: <span style=color:#a31515>&#34;2023-12-24T16:50:45Z&#34;</span>,
</span></span><span style=display:flex><span>        &#34;_modifiedOn&#34;: <span style=color:#a31515>&#34;2024-01-23T20:06:30Z&#34;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        &#34;id&#34;: <span style=color:#a31515>&#34;AN-19670-Equipment-2&#34;</span>,
</span></span><span style=display:flex><span>        &#34;_createdOn&#34;: <span style=color:#a31515>&#34;2023-12-24T18:16:35Z&#34;</span>,
</span></span><span style=display:flex><span>        &#34;_modifiedOn&#34;: <span style=color:#a31515>&#34;2024-01-23T20:06:35Z&#34;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:green>// more items
</span></span></span><span style=display:flex><span><span style=color:green></span>      ]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span> }
</span></span></code></pre></div></div></div></div><p>To filter for items that have multiple properties, include the fields in an array.
This query returns equipment objects that both have been modified and have next versions:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> <span style=color:#2b91af>QueryEquipment</span> {
</span></span><span style=display:flex><span>  <span style=color:#00f>query</span><span style=color:#2b91af>Equipment</span>(filter: {<span style=color:#2b91af>has</span>: [<span style=color:#2b91af>_modifiedOn</span>, nextVersion]}) {
</span></span><span style=display:flex><span>    nextVersion
</span></span><span style=display:flex><span>    _modifiedOn
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=in-this-subset><code>in</code> this subset</h3><p>The <code>in</code> keyword filters for objects that have properties with specified values.
For example, this query returns material lots that have material definitions that are either <code>dough</code> or <code>cookie_unit</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphQL data-lang=graphQL><span style=display:flex><span><span style=color:#00f>query</span>{
</span></span><span style=display:flex><span>  <span style=color:#2b91af>queryMaterialLot</span> @cascade {
</span></span><span style=display:flex><span>    id
</span></span><span style=display:flex><span>    materialDefinition(filter: {<span style=color:#2b91af>id</span>: {<span style=color:#2b91af>in</span>: [<span style=color:#a31515>&#34;dough&#34;</span>, <span style=color:#a31515>&#34;cookie_unit&#34;</span>]}}) {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>id</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=regexp><code>regexp</code></h3><p>The <code>regexp</code> keyword searches for matches using the <a href=https://github.com/google/re2>RE2</a> regular expression engine.</p><p>For example,
this query uses a regular expression in its variables to filter for items that begin with either <code>Kitchen_</code> or <code>Cooling_</code> (case insensitive):</p><div class=tabs><ul class="nav nav-tabs"></ul><div class=tab-content><div class=tab-pane title=QUERY><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> <span style=color:#2b91af>getEquipment</span>($filter: <span style=color:#2b91af>EquipmentFilter</span>) {
</span></span><span style=display:flex><span>  aggregateEquipment(filter: $filter) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>count</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#00f>query</span><span style=color:#2b91af>Equipment</span>(filter: $filter) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>id</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Variables</strong></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;EquipmentFilter&#34;: {
</span></span><span style=display:flex><span>    &#34;id&#34;: {
</span></span><span style=display:flex><span>      &#34;regexp&#34;: <span style=color:#a31515>&#34;/|Kitchen_.*|Cooling_.*/i&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div></div><div class="notices caution"><span class=type>Caution</span> The <code>regexp</code> filters can have performance costs.
After you refine a query filter to return exactly what you need, consider ways to simplify the regular expression
or, if possible, use a different filter.</div><h2 id=combine-filters-with-and-or-not>Combine filters with <code>and</code>, <code>or</code>, <code>not</code></h2><p>To filter by multiple properties, use the <code>and</code>, <code>or</code>, and <code>not</code>, operators.
GraphQL syntax uses <a href=https://en.wikipedia.org/wiki/Infix_notation>infix notation</a>, so: &ldquo;a and b&rdquo; is <code>a, and: { b }</code>, “a or b or c” is <code>a, or: { b, or: c }</code>, and “not” is a prefix (<code>not:</code>).</p><h3 id=this-and-that-property>this <code>and</code> that property</h3><p>The <code>and</code> operator filters for objects that include all specified properties.</p><p>For example, this query returns equipment objects that match two properties:</p><ul><li>The <code>effectiveStart</code> must be the 1st and the 10th of January, 2024.</li><li>It must have a non-null <code>nextVersion</code>.</li></ul><p>The <code>and</code> function is implicit unless you are searching on the same field.
So this filter has an implied <code>and</code>:</p><pre tabindex=0><code>query{
  queryEquipment(filter: {
      effectiveStart: {
        between: {min: &#34;2024-01-01&#34;, max: &#34;2024-01-10&#34;}
        
      }
      has: nextVersion
    
    }
  )
  {
    effectiveStart
    id
    nextVersion
  }
}
</code></pre><div class="notices note"><span class=type>Note</span> This preceding filter syntax is a shorter equivalent to <code>and: {has: nextVersion}</code>.</div><h3 id=one-or-more-properties>One <code>or</code> more properties</h3><p>The <code>or</code> operator filters for objects that have at least one of the specified properties.
For example, you can take the preceding query and modify it so that it returns objects that have an effective start between the specified range or a <code>nextVersion</code> property (inclusive).</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span><span style=color:#2b91af>Equipment</span>(filter: {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>effectiveStart</span>: {
</span></span><span style=display:flex><span>        <span style=color:#2b91af>between</span>: {<span style=color:#2b91af>min</span>: <span style=color:#a31515>&#34;2024-01-01&#34;</span>, <span style=color:#2b91af>max</span>: <span style=color:#a31515>&#34;2024-01-10&#34;</span>}
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#2b91af>or</span>: {<span style=color:#2b91af>has</span>: <span style=color:#2b91af>nextVersion</span>}
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  )
</span></span></code></pre></div><h3 id=not-these-properties><code>not</code> these properties</h3><p>The <code>not</code> operator filters for objects that do not contain the specified property.
For example, you can take the preceding query and modify it so that it returns objects that have an effective start between the specified range and <em>do not</em> have a <code>nextVersion</code> property:</p><pre tabindex=0><code>queryEquipment(filter: {
      effectiveStart: {
        between: {min: &#34;2024-01-01&#34;, max: &#34;2024-01-10&#34;}
        
      }
      not: {has: nextVersion}
    
    }
  )
</code></pre><p>To modify this to include both objects within the range and objects that do not have a <code>nextVersion</code>, use <code>or</code> with <code>not</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span>or: { <span style=color:#2b91af>not</span>: {<span style=color:#2b91af>has</span>: <span style=color:#2b91af>nextVersion</span>} }
</span></span></code></pre></div><h3 id=this-list-of-filters>This list of filters</h3><p>The <code>and</code> and <code>or</code> operators accept lists of filters.
For example, this query filters for equipment objects whose <code>id</code> matches <code>A</code>, <code>B</code>, or <code>C</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span><span style=color:#2b91af>Equipment</span> (filter: {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>or</span>: [
</span></span><span style=display:flex><span>    { <span style=color:#2b91af>id</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;A&#34;</span> } }, 
</span></span><span style=display:flex><span>    { <span style=color:#2b91af>id</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;B&#34;</span> } },
</span></span><span style=display:flex><span>    { <span style=color:#2b91af>id</span>: { <span style=color:#2b91af>eq</span>: <span style=color:#a31515>&#34;C&#34;</span> } }, 
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>  })
</span></span></code></pre></div><h2 id=use-directives>Use directives</h2><p>Rhize offers <a href=https://the-guild.dev/graphql/tools/docs/schema-directives#what-about-query-directives><em>query directives</em></a>, special instructions about how to look up and return values in a query.
These directives can extend your filtering to look at nested properties or to conditionally display a field.</p><p>All directives begin with the <code>@</code> sign.</p><h3 id=cascade>Cascade</h3><p>The <code>@cascade</code> directive filters for certain nodes within a query.
Use it to filter requested resources by a nested sub-property, similar to a <code>WHERE</code> clause in SQL.</p><div class="notices caution"><span class=type>Caution</span> <code>@cascade</code> is not as performant as flatter queries.
Consider using it only after you&rsquo;ve exhausted other query structures to return the data you want.</div><p>For example, this query filters for job responses with an ID of <code>12341</code>, and then filters that set for only the items that have a <code>data.properyLabel</code> field with a value of <code>INSTANCE ID</code>.</p><div class=tabs><ul class="nav nav-tabs"></ul><div class=tab-content><div class=tab-pane title=QUERY><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span> <span style=color:#2b91af>QueryJobResponse</span>($filter: <span style=color:#2b91af>JobResponseFilter</span>, $propertyLabel: <span style=color:#2b91af>String</span>) {
</span></span><span style=display:flex><span>  <span style=color:#00f>query</span><span style=color:#2b91af>JobResponse</span>(filter: $filter)  @cascade(<span style=color:#2b91af>fields</span>:[<span style=color:#a31515>&#34;data&#34;</span>]){
</span></span><span style=display:flex><span>    <span style=color:#2b91af>id</span>
</span></span><span style=display:flex><span>    iid
</span></span><span style=display:flex><span>    data(filter: { <span style=color:#2b91af>label</span>: { <span style=color:#2b91af>anyoftext</span>: $propertyLabel } }) {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>id</span>
</span></span><span style=display:flex><span>      iid
</span></span><span style=display:flex><span>      label
</span></span><span style=display:flex><span>      value
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Variables</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    &#34;filter&#34;: {
</span></span><span style=display:flex><span>        &#34;id&#34;: {
</span></span><span style=display:flex><span>            &#34;alloftext&#34;: <span style=color:#a31515>&#34;12341&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    &#34;propertyLabel&#34;: <span style=color:#a31515>&#34;INSTANCE ID&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div></div><h3 id=include>Include</h3><p>The <code>@include</code> directive returns a field only if its variable is <code>true</code>.</p><p>For example, when <code>includeIf</code> is <code>true</code>, this query omits specified values for <code>versions</code>.</p><div class=tabs><ul class="nav nav-tabs"></ul><div class=tab-content><div class=tab-pane title=QUERY><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#00f>query</span>($includeIf: <span style=color:#2b91af>Boolean</span>!) {
</span></span><span style=display:flex><span>  <span style=color:#2b91af>queryEquipment</span> {
</span></span><span style=display:flex><span>    id
</span></span><span style=display:flex><span>    versions @include(if: $includeIf) {
</span></span><span style=display:flex><span>      <span style=color:#2b91af>id</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=tab-pane title=VARIABLES><p>Change to <code>true</code> to include <code>versions</code> fields.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;includeIf&#34;: <span style=color:#00f>false</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div></div></article><div class=right-toc><nav id=TableOfContents><ul><li><a href=#filter-by-property>Filter by property</a><ul><li><a href=#between-dates><code>between</code> dates</a></li><li><a href=#has-property><code>has</code> property</a></li><li><a href=#in-this-subset><code>in</code> this subset</a></li><li><a href=#regexp><code>regexp</code></a></li></ul></li><li><a href=#combine-filters-with-and-or-not>Combine filters with <code>and</code>, <code>or</code>, <code>not</code></a><ul><li><a href=#this-and-that-property>this <code>and</code> that property</a></li><li><a href=#one-or-more-properties>One <code>or</code> more properties</a></li><li><a href=#not-these-properties><code>not</code> these properties</a></li><li><a href=#this-list-of-filters>This list of filters</a></li></ul></li><li><a href=#use-directives>Use directives</a><ul><li><a href=#cascade>Cascade</a></li><li><a href=#include>Include</a></li></ul></li></ul></nav></div></div></main><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script><script src=https://docs.rhize.com/js/clipboard.min.js></script><script src=https://docs.rhize.com/js/dgraph.js?a9873668f1334ff6c49d4edea0a4bc38></script><script>hljs.initHighlightingOnLoad()</script></body></html>