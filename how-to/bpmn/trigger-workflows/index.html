<!doctype html><html lang=en class="js csstransforms3d"><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-0PJKXDWQ4P"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0PJKXDWQ4P")}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=referrer content="no-referrer-when-downgrade"><meta property="og:image" content="https://docs.rhize.com/images/rhize-logo.png"><meta property="og:image:secure_url" content="https://docs.rhize.com/images/rhize-logo.png"><meta property="og:description" content="How to trigger a workflow in Rhize. Use the API, publish a message to the broker, listen to a data source, or set timers."><meta property="og:type" content="website"><meta property="og:title" content="Trigger workflows"><meta property="og:site_name" content="Rhize documentation"><meta property="og:url" content="https://docs.rhize.com/how-to/bpmn/trigger-workflows/"><meta property="og:locale" content="en"><meta name=generator content="Hugo 0.126.1"><meta name=description content="How to trigger a workflow in Rhize. Use the API, publish a message to the broker, listen to a data source, or set timers."><link rel=canonical href=https://docs.rhize.com/how-to/bpmn/trigger-workflows/><link rel=apple-touch-icon sizes=57x57 href=https://docs.rhize.com/images/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=https://docs.rhize.com/images/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=https://docs.rhize.com/images/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=https://docs.rhize.com/images/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=https://docs.rhize.com/images/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=https://docs.rhize.com/images/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=https://docs.rhize.com/images/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=https://docs.rhize.com/images/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=https://docs.rhize.com/images/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=https://docs.rhize.com/images/favicons/manifest.webmanifest><link rel=mask-icon href=https://docs.rhize.com/images/favicons/safari-pinned-tab.svg color=#fe2c06><link rel="shortcut icon" href=https://docs.rhize.com/images/favicons/favicon.ico><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js></script><script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/go.min.js></script><script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/java.min.js integrity="sha256-RyOs5MjQ+Ef9DQrPHp4QGr2tcNjxLh6mCkkW+sS4doU=" crossorigin=anonymous></script><script src=//code.jquery.com/jquery-3.2.1.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><title>Trigger workflows
|
How to
</title><link href=https://docs.rhize.com/css/theme.css?07639695cdaf2b91d81cbbea8d450140 rel=stylesheet><link href=https://docs.rhize.com/css/runnable.css?46648956d99faa2e057d109b9f2a52e6 rel=stylesheet><link href=https://docs.rhize.com/css/tabs.css?035edc32762cb7973b740e3067101ced rel=stylesheet><link href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css rel=stylesheet integrity=sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ crossorigin=anonymous><script src=//cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js integrity=sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js integrity=sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn crossorigin=anonymous></script><link href="//fonts.googleapis.com/css?family=Lato:400,700" rel=stylesheet><link href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link href=https://cdn.lineicons.com/2.0/LineIcons.css rel=stylesheet crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3></head><body><nav id=header><div class=header-left><div><a href=https://docs.rhize.com/ class=brand><img src=https://docs.rhize.com//images/rhize-logo.png alt=RHIZE class=logo></a><div class=logo-tagline><span>Documentation</span></div></div></div><div class=header-right><div id=docsearch><div class="menu-search align-middle"><div id=docsearch></div></div></div><div><ul class=menu><li><a href=https://rhize.com target=_blank>Home</a></li><li><a href=https://forum.rhize.com target=_blank>Community</a></li><li><a href=https://github.com/libremfg/libremfg.github.io target=_blank>GitHub</a></li></ul></div></div><a href=# id=sidebar-toggle><i class="fa fa-bars"></i></a></nav><aside id=sidebar><ul class=topics><li class="topic main-topic children"><a id=get-started href=#>Get started</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/get-started/introduction/>What is Rhize?</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/get-started/how-rhize-works/>How Rhize works</a></li></ul></li><li class="topic main-topic children"><a id=deploy href=#>Deploy</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=#>Install</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/overview/>Overview</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/setup-kubernetes/>Set up Kubernetes</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/keycloak/>Configure Keycloak</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/services/>Install Rhize services</a></li></ul></li><li class="topic sub-topic"><a href=#>Back up</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/graphdb/>Back up the Graph DB</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/audit/>Back up Audit PostgreSQL</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/grafana/>Back up Grafana</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/keycloak/>Back up Keycloak</a></li></ul></li><li class="topic sub-topic"><a href=#>Restore</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/graphdb/>Restore the GraphDB</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/audit/>Restore Audit backup</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/grafana/>Restore Grafana</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/keycloak/>Restore Keycloak</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/bpmn-nodes/>BPMN execution recovery</a></li></ul></li><li class="topic sub-topic"><a href=#>Maintain</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/maintain/audit/>Archive the PostgreSQL Audit trail</a></li></ul></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/upgrade/>Upgrade</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/about-openidconnect/>About OpenID connect</a></li></ul></li><li class="topic main-topic children active"><a id=user-guides href=#>User guides</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=#>Use GraphQL</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/call-the-graphql-api/>Overview: the Rhize API</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/query/>Query</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/filter/>Filter</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/mutate/>Mutate</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/subscribe/>Subscribe</a></li></ul></li><li class="topic sub-topic active"><a href=#>Write BPMN workflows</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/create-workflow/>Overview: orchestrate processes</a></li><li class="topic sub-topic active"><a href=https://docs.rhize.com/how-to/bpmn/trigger-workflows/>Trigger workflows</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/use-jsonata/>Use JSONata</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/debug-workflows/>Handle errors and debug</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/tune-performance/>Tune performance</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/variables/>Special variables</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/naming-conventions/>Naming conventions</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/>BMPN elements</a></li></ul></li><li class="topic sub-topic"><a href=#>Define production models</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/model/create-objects-ui/>Create objects from the UI</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/model/master-definitions/>Master definitions and fields</a></li></ul></li><li class="topic sub-topic"><a href=#>Connect event data</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/publish-subscribe/connect-datasource/>Connect data source</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/publish-subscribe/turn-value-into-event/>Turn values into events</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/publish-subscribe/track-changes/>Track changes (CDC)</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/publish-subscribe/tutorial-create-equipment-class-rule/>Tutorial: Trigger a workflow from a rule</a></li></ul></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/audit/>Audit</a></li></ul></li><li class="topic main-topic children"><a id=use-cases href=#>Use cases</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/use-cases/overview/>Overview</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/use-cases/ebr/>Electronic batch records</a></li></ul></li><li class="topic main-topic children"><a id=reference href=#>Reference</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=#>Service configuration</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/service-config/agent-configuration/>Agent configuration</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/service-config/audit-configuration/>Audit configuration</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/service-config/bpmn-configuration/>BPMN configuration</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/service-config/core-configuration/>Core configuration</a></li></ul></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/default-ports/>Default URLs and local ports</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/gql-types/>GQL types and filters</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/glossary/>Glossary</a></li></ul></li><li class="topic main-topic children"><a id=explanations href=#>Explanations</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/explanations/manufacturing-data-hub/>Manufacturing Data Hub</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/explanations/isa-95-diagrams/>ISA-95 diagrams</a></li></ul></li><li class="topic main-topic children"><a id=releases href=#>Releases</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/3-0/>3.0.0</a></li><li class="topic sub-topic"><a href=#>Changelog</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/changelog/3-0-0/>3.0.0 (general release)</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/changelog/3-0-0rc09/>3.0.0rc09</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/changelog/3-0-0rc08/>3.0.0rc08</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/changelog/3-0-0rc07/>3.0.0rc07</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/changelog/3-0-0rc06/>3.0.0rc06</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/changelog/3-0-0rc05/>3.0.0rc05</a></li></ul></li></ul></li><li class="topic main-topic"><a href=https://docs.rhize.com/></a></li></ul></aside><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script><script type=text/javascript>docsearch({appId:"70JLDGIDQA",apiKey:"2b4c57aa9d3d0386bf1a6df5b54eb3cf",indexName:"rhize",insights:!0,container:"#docsearch",debug:!1})</script></body></html><main class=content-wrapper><div class=content><div class=top-toc><nav id=TableOfContents><ul><li><a href=#start-a-workflow-from-an-api>Start a workflow from an API</a><ul><li><a href=#synchronous-and-asynchronous-api-triggers>Synchronous and asynchronous API triggers</a></li><li><a href=#customresponse><code>customResponse</code></a></li><li><a href=#variables-versions>Additional properties for workflow calls</a></li></ul></li><li><a href=#start-from-a-message>Start from a message</a></li><li><a href=#rule-based-triggers>Rule-based triggers</a></li><li><a href=#timer-triggers>Timer triggers</a></li></ul></nav></div><article><a class=edit-btn target=_blank href=https://github.com/libremfg/libremfg.github.io/edit/main/content/how-to/bpmn/trigger-workflows.md><i class="fa fa-github-alt"></i> Edit Page</a><h1 class=post-title>Trigger workflows</h1><p>You also have multiple ways to start, or <em>trigger</em>, a BPMN workflow.
The best choice of trigger depends on the context of the event and the system that initiates the workflow.</p><ul><li><strong>API triggers</strong> come from a GraphQL call to the Rhize DB.</li><li><strong>Message triggers</strong> subscribe to a topic on the Rhize broker and run whenever an event is published to that topic.</li><li><strong>Rule triggers</strong> subscribe to the topics on a remote data source, such as an edge OPC-UA server or MQTT broker.</li><li><strong>Timer triggers</strong> start according to some schedule (once or repeating).</li></ul><h2 id=start-a-workflow-from-an-api>Start a workflow from an API</h2><p>No matter the start event, <strong>all workflows can be triggered by an API call</strong>.
However, if the workflow uses the default blank start event, you must trigger it through API call.
For example, an API trigger may originate from a custom frontend application or a developer&rsquo;s local machine.</p><p>The Rhize API has two mutations to start workflows.
Both must specify the workflow ID as an <a href=https://docs.rhize.com/how-to/gql/call-the-graphql-api/#request-body>argument in the request body</a>.
Each run for a workflow returns a unique <code>ID</code> that you can use for debugging.</p><h3 id=synchronous-and-asynchronous-api-triggers>Synchronous and asynchronous API triggers</h3><p>To start BPMN workflows, Rhize has two API operations:</p><ul><li><code>createAndRunBPMNSync</code> starts a workflow and waits for the process to complete or abort (synchronous).</li><li><code>createAndRunBpmn</code> starts a workflow and does not wait for the response (asynchronous).</li></ul><p>Use the synchronous operation if you want to receive information about the result of the workflow in the call response.
On the other hand, the asynchronous operation frees up the call system to do more work, no matter whether the workflow runs correctly.</p><p>Both operations have similar call syntax.
For example, compare the syntax for these calls:</p><div class=tabs><ul class="nav nav-tabs"></ul><div class=tab-content><div class=tab-pane title=SYNCHRONOUS><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gql data-lang=gql><span style=display:flex><span><span style=color:#00f>mutation</span> <span style=color:#2b91af>sychronousCall</span>{
</span></span><span style=display:flex><span>  createAndRunBpmnSync(id: <span style=color:#a31515>&#34;API_demo_custom_response&#34;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>id</span>
</span></span><span style=display:flex><span>    jobState
</span></span><span style=display:flex><span>    customResponse
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=tab-pane title=ASYNC><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gql data-lang=gql><span style=display:flex><span><span style=color:#00f>mutation</span> <span style=color:#2b91af>asyncCall</span>{
</span></span><span style=display:flex><span>  createAndRunBpmn(id: <span style=color:#a31515>&#34;API_demo_custom_response&#34;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#2b91af>id</span>
</span></span><span style=display:flex><span>    jobState
</span></span><span style=display:flex><span>    customResponse
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></div></div><p>The responses for these calls have two differences:</p><ul><li>For synchronous calls, the returned <code>JobState</code> should be a finished value (such as <code>COMPLETED</code> or <code>ABORTED</code>). Asynchronous calls likely return an in-progress status, such as <code>RUNNING</code>.</li><li>Synchronous calls can request the <code>dataJSON</code> field to report the entire variable context at the final node.</li><li>Only the synchronous call receives data in the <code>customResponse</code>. For details, refer to the next section.</li></ul><h3 id=customresponse><code>customResponse</code></h3><p>The <code>customResponse</code> is a special variable to return data in the response to clients that run <code>createAndRunBPMNSync</code> operations.</p><p>You can set the <code>customResponse</code> in any <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/>element</a> that has an <code>Output</code> or <code>Input response</code> parameter.
It can use any data from the <abbr title="The context and variables that are passed between tasks in a BPMN workflow">process variable context</abbr>, including variables added on the fly.</p><p>Functionally, only the last value of the <code>customResponse</code> is returned to the client that sent the response.
However, you can use conditional branches and different end nodes to add error handling.
For example, this workflow returns <code>Workflow ran correctly</code> if the call variables include the message <code>CORRECT</code> and an error message in all other cases.</p><figure class=big-figure><a href=https://docs.rhize.com/images/bpmn/screenshot-rhize-bpmn-error-handling-custom-response.png target=_blank><img src=https://docs.rhize.com/images/bpmn/screenshot-rhize-bpmn-error-handling-custom-response.png alt="A BPMN workflow with customResponse in the output of the end node" width=80%></a><figcaption class=caption>Download this workflow from <a href=https://github.com/libremfg/bpmn-templates/tree/main/custom-response-error-events>BPMN templates</a></figcaption></figure><h3 id=variables-versions>Additional properties for workflow calls</h3><p>API operations can also include parameters to add variables to the <abbr title="The context and variables that are passed between tasks in a BPMN workflow">process variable context</abbr> and to specify a workflow version.</p><p>To add variables, use the <code>variables</code> input argument.
Note that the variables are accessible from their root object.
For example, a workflow would access the following string value at <code>$.input.message</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gql data-lang=gql><span style=display:flex><span><span style=color:#a31515>&#34;variables&#34;</span>: <span style=color:#a31515>&#34;{\&#34;input\&#34;:{\&#34;message\&#34;:\&#34;CORRECT\&#34;}}&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>To specify a version, use the <code>version</code> property. For example, this input instructs Rhize to run version <code>3</code> of the <code>API_demoCallToRemoteAPI</code> workflow:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  &#34;createAndRunBpmnSyncId&#34;: <span style=color:#a31515>&#34;API_demoCallToRemoteAPI&#34;</span>,
</span></span><span style=display:flex><span>  &#34;version&#34;: <span style=color:#a31515>&#34;3&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>If the <code>version</code> property is empty, Rhize runs the active version of the workflow (if an active version exists).</p><h2 id=start-from-a-message>Start from a message</h2><p>The <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/#message-start-event>message start event</a> subscribes to a topic on the Rhize broker.
Whenever a message is published to this topic, the workflow is triggered.
The Rhize broker can receive messages published over MQTT, NATS, and OPC UA.</p><p>For example, this workflow subscribes to the topic <code>material/stuff</code>.
Whenever a message is published to the topic, it evaluates whether the quantity is in the correct threshold.
If the quantity is correct, it uses the <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/#graphql-mutation/>mutation service task</a> to add a material lot.
If incorrect, it sends an alert back to the broker.</p><figure class=big-figure><a href=https://docs.rhize.com/images/bpmn/rhize-bpmn-message-start-throw-conditional.png target=_blank><img src=https://docs.rhize.com/images/bpmn/rhize-bpmn-message-start-throw-conditional.png alt="BPMN message start with conditional evaluation" width=65%></a><figcaption class=caption>Download this workflow as a <a href=https://github.com/libremfg/bpmn-templates/tree/main/msg-start-and-throw>BPMN template</a>.</figcaption></figure><p>Note that, for a workflow to run from a message start event, the workflow <strong>must be enabled.</strong></p><h2 id=rule-based-triggers>Rule-based triggers</h2><p>Rule-based triggers subscribe to tag changes from a data source and trigger when the rule change condition is met.
Typically, users choose this workflow trigger when they want to orchestrate processes originating from level-1 and level-2 systems.</p><p>To add a data source and create a rule based trigger, refer to <a href=https://docs.rhize.com/how-to/publish-subscribe/turn-value-into-event/>Turn values into events</a>.</p><h2 id=timer-triggers>Timer triggers</h2><p>Timer triggers run according to a configured time or interval.
For example, a timer trigger may start a workflow each day, or once at a certain time.</p><p>To use timer triggers, use the <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/#timer-start-event>timer start event</a>. As with message start events, the workflow <strong>must be enabled</strong> for it to run.</p></article><div class=right-toc><nav id=TableOfContents><ul><li><a href=#start-a-workflow-from-an-api>Start a workflow from an API</a><ul><li><a href=#synchronous-and-asynchronous-api-triggers>Synchronous and asynchronous API triggers</a></li><li><a href=#customresponse><code>customResponse</code></a></li><li><a href=#variables-versions>Additional properties for workflow calls</a></li></ul></li><li><a href=#start-from-a-message>Start from a message</a></li><li><a href=#rule-based-triggers>Rule-based triggers</a></li><li><a href=#timer-triggers>Timer triggers</a></li></ul></nav></div></div></main><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script><script src=https://docs.rhize.com/js/clipboard.min.js></script><script src=https://docs.rhize.com/js/dgraph.js?a9873668f1334ff6c49d4edea0a4bc38></script><script>hljs.initHighlightingOnLoad()</script></body></html>