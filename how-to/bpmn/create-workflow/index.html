<!doctype html><html lang=en class="js csstransforms3d"><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-0PJKXDWQ4P"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0PJKXDWQ4P")}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=referrer content="no-referrer-when-downgrade"><meta property="og:image" content="https://docs.rhize.com/images/rhize-logo.png"><meta property="og:image:secure_url" content="https://docs.rhize.com/images/rhize-logo.png"><meta property="og:description" content="An overview of how to use Rhize's custom BPMN engine and UI to orchestrate workflows.
"><meta property="og:type" content="website"><meta property="og:title" content="Overview: orchestrate processes"><meta property="og:site_name" content="Rhize documentation"><meta property="og:url" content="https://docs.rhize.com/how-to/bpmn/create-workflow/"><meta property="og:locale" content="en"><meta name=generator content="Hugo 0.135.0"><meta name=description content="An overview of how to use Rhize's custom BPMN engine and UI to orchestrate workflows.
"><link rel=canonical href=https://docs.rhize.com/how-to/bpmn/create-workflow/><link rel=apple-touch-icon sizes=57x57 href=https://docs.rhize.com/images/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=https://docs.rhize.com/images/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=https://docs.rhize.com/images/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=https://docs.rhize.com/images/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=https://docs.rhize.com/images/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=https://docs.rhize.com/images/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=https://docs.rhize.com/images/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=https://docs.rhize.com/images/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=https://docs.rhize.com/images/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=https://docs.rhize.com/images/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=https://docs.rhize.com/images/favicons/manifest.webmanifest><link rel=mask-icon href=https://docs.rhize.com/images/favicons/safari-pinned-tab.svg color=#fe2c06><link rel="shortcut icon" href=https://docs.rhize.com/images/favicons/favicon.ico><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js></script><script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/go.min.js></script><script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/java.min.js integrity="sha256-RyOs5MjQ+Ef9DQrPHp4QGr2tcNjxLh6mCkkW+sS4doU=" crossorigin=anonymous></script><script src=//code.jquery.com/jquery-3.2.1.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><title>Overview: orchestrate processes | How to
</title><link href=https://docs.rhize.com/css/theme.css?55e52aec195a82e2ea2d860ffc75cf75 rel=stylesheet><link href=https://docs.rhize.com/css/runnable.css?46648956d99faa2e057d109b9f2a52e6 rel=stylesheet><link href=https://docs.rhize.com/css/tabs.css?035edc32762cb7973b740e3067101ced rel=stylesheet><link href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css rel=stylesheet integrity=sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ crossorigin=anonymous><script src=//cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js integrity=sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js integrity=sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn crossorigin=anonymous></script><link href="//fonts.googleapis.com/css?family=Lato:400,700" rel=stylesheet><link href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link href=https://cdn.lineicons.com/2.0/LineIcons.css rel=stylesheet crossorigin=anonymous><script type=text/javascript id=hs-script-loader async defer src=//js.hs-scripts.com/9290851.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3></head><body><nav id=header><div class=header-left><div><a href=https://docs.rhize.com/ class=brand><img src=https://docs.rhize.com//images/rhize-logo.png alt=RHIZE class=logo></a><div class=logo-tagline><span>Documentation</span></div></div></div><div class=header-right><div id=docsearch><div class="menu-search align-middle"><div id=docsearch></div></div></div><div><ul class=menu><li><a href=https://rhize.com target=_blank>Home</a></li><li><a href=https://discord.gg/ZRpUBXmrkV target=_blank>Community</a></li><li><a href=https://www.youtube.com/@rhizemanufacturingdatahub target=_blank>Youtube</a></li></ul></div></div><a href=# id=sidebar-toggle><i class="fa fa-bars"></i></a></nav><aside id=sidebar><ul class=topics><li class="topic main-topic children"><a id=get-started href=#>Get started</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/get-started/introduction/>What is Rhize?</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/get-started/how-rhize-works/>How Rhize works</a></li></ul></li><li class="topic main-topic children"><a id=deploy href=#>Deploy</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=#>Install</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/overview/>Overview</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/setup-kubernetes/>Set up Kubernetes</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/keycloak/>Configure Keycloak</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/install/services/>Install Rhize services</a></li></ul></li><li class="topic sub-topic"><a href=#>Back up</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/graphdb/>Back up the Graph DB</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/audit/>Back up Audit PostgreSQL</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/grafana/>Back up Grafana</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/backup/keycloak/>Back up Keycloak</a></li></ul></li><li class="topic sub-topic"><a href=#>Restore</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/graphdb/>Restore the GraphDB</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/audit/>Restore Audit backup</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/grafana/>Restore Grafana</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/restore/keycloak/>Restore Keycloak</a></li></ul></li><li class="topic sub-topic"><a href=#>Maintain</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/maintain/audit/>Archive the PostgreSQL Audit trail</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/maintain/bpmn-nodes/>BPMN execution recovery</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/maintain/keycloak-events/>Export Keycloak events</a></li></ul></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/upgrade/>Upgrade</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/deploy/about-openidconnect/>About OpenID connect</a></li></ul></li><li class="topic main-topic children active"><a id=user-guides href=#>User guides</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=#>Use GraphQL</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/call-the-graphql-api/>Overview: the Rhize API</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/query/>Query</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/filter/>Filter</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/mutate/>Mutate</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/gql/subscribe/>Subscribe</a></li></ul></li><li class="topic sub-topic active"><a href=#>Write BPMN workflows</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic active"><a href=https://docs.rhize.com/how-to/bpmn/create-workflow/>Overview: orchestrate processes</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/trigger-workflows/>Trigger workflows</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/use-jsonata/>Use JSONata</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/debug-workflows/>Handle errors and debug</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/tune-performance/>Tune performance</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/variables/>Special variables</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/naming-conventions/>Naming conventions</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/learning-resources/>BPMN learning resources</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/>BMPN elements</a></li></ul></li><li class="topic sub-topic"><a href=#>Define production models</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/model/create-objects-ui/>Create objects from the UI</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/model/master-definitions/>Master definitions and fields</a></li></ul></li><li class="topic sub-topic"><a href=#>Connect event data</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/publish-subscribe/connect-datasource/>Connect data source</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/publish-subscribe/create-equipment-class-rule/>Tutorial: Trigger a workflow from a rule</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/publish-subscribe/track-changes/>Track changes (CDC)</a></li></ul></li><li class="topic sub-topic"><a href=#>Use work calendars</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/work-calendars/about-calendars-and-overrides/>About calendars and overrides</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/work-calendars/create-work-calendar/>Create work calendars</a></li></ul></li><li class="topic sub-topic"><a href=https://docs.rhize.com/how-to/audit/>Audit</a></li></ul></li><li class="topic main-topic children"><a id=use-cases href=#>Use cases</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/use-cases/overview/>Overview</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/use-cases/genealogy/>Genealogy</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/use-cases/ebr/>Electronic batch records</a></li></ul></li><li class="topic main-topic children"><a id=reference href=#>Reference</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=#>Service configuration</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/service-config/agent-configuration/>Agent configuration</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/service-config/audit-configuration/>Audit configuration</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/service-config/bpmn-configuration/>BPMN configuration</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/service-config/calendar-configuration/>Calendar configuration</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/service-config/core-configuration/>Core configuration</a></li></ul></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/observability-metrics/>Observability metrics</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/default-ports/>Default URLs and local ports</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/gql-types/>GQL types and filters</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/reference/glossary/>Glossary</a></li></ul></li><li class="topic main-topic children"><a id=explanations href=#>Explanations</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/explanations/manufacturing-data-hub/>Manufacturing Data Hub</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/explanations/isa-95-diagrams/>ISA-95 diagrams</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/explanations/how-to-speak-isa-95/>How to speak ISA-95</a></li></ul></li><li class="topic main-topic children"><a id=releases href=#>Releases</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/3-0-1/>3.0.1</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/3-0/>3.0.0</a></li><li class="topic sub-topic"><a href=#>Changelog</a><div class=arrow-down></div><ul class=sub-topics><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/changelog/3-0-0/>3.0.0 (general release)</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/changelog/3-0-0rc09/>3.0.0rc09</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/changelog/3-0-0rc08/>3.0.0rc08</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/changelog/3-0-0rc07/>3.0.0rc07</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/changelog/3-0-0rc06/>3.0.0rc06</a></li><li class="topic sub-topic"><a href=https://docs.rhize.com/releases/changelog/3-0-0rc05/>3.0.0rc05</a></li></ul></li></ul></li><li class="topic main-topic"><a href=https://docs.rhize.com/></a></li></ul></aside><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script><script type=text/javascript>docsearch({appId:"70JLDGIDQA",apiKey:"2b4c57aa9d3d0386bf1a6df5b54eb3cf",indexName:"rhize",insights:!0,container:"#docsearch",debug:!1})</script></body></html><main class=content-wrapper><div class=content><div class=top-toc><nav id=TableOfContents><ul><li><a href=#request-and-send-data>Request and send data</a><ul><li><a href=#interact-with-the-rhize-api>Interact with the Rhize API</a></li><li><a href=#interact-with-external-systems>Interact with external systems</a></li><li><a href=#publish-and-subscribe>Publish and subscribe</a></li></ul></li><li><a href=#transform-and-calculate>Transform and calculate</a></li><li><a href=#control-flows>Control flows</a><ul><li><a href=#exclusive-gateway>Exclusive gateway.</a></li><li><a href=#parallel-gateways>Parallel gateways</a></li></ul></li><li><a href=#trigger-workflows>Trigger workflows</a></li><li><a href=#reuse-workflows>Reuse workflows</a></li><li><a href=#access-process-variable-context>Access process variable context</a></li><li><a href=#examples>Examples</a></li></ul></nav></div><article><a class=edit-btn target=_blank href=https://github.com/libremfg/libremfg.github.io/edit/main/content/how-to/bpmn/create-workflow.md><i class="fa fa-github-alt"></i> Edit Page</a><h1 class=post-title>Overview: orchestrate processes</h1><p>This guide provides a quick overview of the major features of the Rhize <abbr title="Business Process Model and Notation. A standardized graphical notation used to represent business processes in an intuitive, visual way. Rhize's BPMN UI and engine provides a low-code interface for complex event handling">BPMN</abbr> engine and interface, with links to detailed guides for specific topics.
For a reference of all BPMN elements and their parameters, refer to <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/>BPMN elements</a>.</p><p>The Rhize BPMN UI provides a graphical interface to transform and standardize data flows across systems.
Such <em>process orchestration</em> has many uses for manufacturing.
For example, you can write a BPMN workflow to do any of the following:</p><ul><li>Automatically ingest data from ERP and SCADA systems, then transform and store the payloads in the standardized ISA-95 representation</li><li>Coordinate tasks across various systems, creating a layer for different data and protocols to pass through</li><li>Calculate derived values from the data that is exchanged to perform functions such as waste calculation and process control.</li></ul><figure class=big-figure><a href=https://docs.rhize.com/images/bpmn/rhize-bpmn-coordination-between-multiple-systems.png.webp target=_blank><img src=https://docs.rhize.com/images/bpmn/rhize-bpmn-coordination-between-multiple-systems.png.webp alt="An example of a workflow that transforms, calculates, stores, and sends to external systems" width=70%></a></figure><div class="notices note"><span class=type>Note</span> Rhize BPMN workflows conform to the visual grammar described in the OMG standard for <a href=https://www.omg.org/spec/BPMN/2.0/>Business Process Model and Notation</a>.
Each process is made of <em>events</em> (circles), <em>activities</em> (rectangles), <em>gateways</em> (diamonds), and <em>flows</em> (arrows).
Some elements are extended for Rhize-specific features, such as service tasks that call the GraphQL API.
Some elements from the standard are unused and thus do not appear in the UI.</div><h2 id=request-and-send-data>Request and send data</h2><p>Workflows often exchange data between Rhize and one or more external systems.
The BPMN activity <em>task templates</em> provide multiple ways to communicate with internal and external systems,
and pass data over different protocols.
Additionally, <em>message</em> events provide templates to publish and subscribe to the Rhize broker.</p><p>Each template has a set of parameters to configure it.
<strong>To use a template</strong>:</p><ol><li>Select the <em>activity</em> (rectangle) element.</li><li>Select <strong>Template</strong> and then choose the template you want.</li><li>Configure the template according to its <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/#jsonata-transform>Task parameters</a>.</li></ol><h3 id=interact-with-the-rhize-api>Interact with the Rhize API</h3><p>Use GraphQL tasks to query and change data in your manufacturing knowledge graph.
For example:</p><ul><li>A scheduling workflow could use the <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/#graphql-query>Query task</a> to find all <code>JobResponses</code> whose state is <code>COMPLETED</code>.</li><li>An ingestion workflow might use a <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/#graphql-mutation>Mutation task</a> to update new <code>jobResponse</code> data that was published from a SCADA system.</li></ul><p>You can also use <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/#jsonata-transform>JSONata</a> in your GraphQL payloads to dynamically add values at runtime.
For details about how to use the Rhize API, read the <a href=https://docs.rhize.com/how-to/gql/>Guide to GraphQL</a>.</p><h3 id=interact-with-external-systems>Interact with external systems</h3><p>To make HTTP requests to external systems, use the <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/#call-rest-api>REST task</a>.
For example, you might send a <code>POST</code> with performance values to an ERP system, or use a <code>GET</code> operation to query test results.</p><div class="notices note"><span class=type>Note</span> Besides REST, you can use this template to interact with any HTTP API.</div><h3 id=publish-and-subscribe>Publish and subscribe</h3><p>Besides HTTP, workflows can also publish and subscribe messages over MQTT, NATS, and OPC UA.</p><figure class=big-figure><a href=https://docs.rhize.com/images/bpmn/rhize-bpmn-message-start-throw-conditional.png target=_blank><img src=https://docs.rhize.com/images/bpmn/rhize-bpmn-message-start-throw-conditional.png alt="A workflow that listens to a message and throws a message" width=60%></a><figcaption class=caption>A workflow that evaluates a message and throws a if the payload meets a certain condition message</figcaption></figure><p><strong>To publish and subscribe to the Rhize broker:</strong></p><ol><li>Select a start (thin circle) or intermediate (double-line) circle.</li><li>Select the wrench icon.</li><li>Select the message event (circle with an envelope).</li><li>Configure the message topic and body according to the <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/#events>Event parameters</a>.</li><li>If using an <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/#service-tasks>Intermediate throw event</a>, name the variable <code>BODY</code>.</li></ol><p><strong>To listen and publish to an edge device:</strong></p><ol><li><a href=https://docs.rhize.com/how-to/publish-subscribe/connect-datasource/>Create a data source</a>.</li><li>In your workflow, select the task. And choose the <strong>Data source</strong> template.</li><li>Configure the <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/#service-tasks>Data Source task parameters</a>.</li></ol><p>The strategy you choose to send and receive message data depends on your architectural setup.
Generally, data-source messages come from level-1 and level-2 devices on the edge,
and messages published to the Rhize broker come from any NATS, MQTT, or OPC UA client.
The following diagram shows some common ways to interact with messages through BPMN.</p><figure class=big-figure><a href=https://docs.rhize.com/images/bpmn/diagram-rhize-bpmn-control-message-flow.svg target=_blank><img src=https://docs.rhize.com/images/bpmn/diagram-rhize-bpmn-control-message-flow.svg alt="Diagram providing decision of control flows" width=50%></a></figure><h2 id=transform-and-calculate>Transform and calculate</h2><p>As the data in a workflow passes from start node to end node, it often undergoes some secondary processing.
Mew properties might be added, some data might be filtered, or a node might create a set of derived values from the original input.
For example, you might use calculate statistics, or transform a message payload into a format to be received by the Rhize API or an external system.</p><figure class=big-figure><a href=https://docs.rhize.com/images/bpmn/screenshot-rhize-jsonata-map.png target=_blank><img src=https://docs.rhize.com/images/bpmn/screenshot-rhize-jsonata-map.png alt="Annotated and truncated version of an example transformation to the operationEvent definition" width=70%></a><figcaption class=caption>Annotated and truncated version of mapping an external event to the <code>operationEvent</code> definition</figcaption></figure><p>To calculate and transform data, BPMN nodes can interpret the JSONata expression language.
For details, read the complete <a href=https://docs.rhize.com/how-to/bpmn/use-jsonata>Rhize guide to JSONata</a>.</p><h2 id=control-flows>Control flows</h2><p>As data passes through a workflow, you might need to conditionally direct it to specific tasks, transformations, and events.
For this, Rhize has <em>gateways</em>, represented as diamonds.</p><h3 id=exclusive-gateway>Exclusive gateway.</h3><p>Represented by an <code>X</code> symbol, exclusive gateways create decision branches based on whether a condition is true.
While you can use JSONata conditionals to control flows within tasks,
exclusive gateways are the most common and visually understandable way to execute conditional steps.</p><p>To use an exclusive gateway:</p><ol><li>Create an arrow from the control start to an exclusive gateway (diamond with <code>X</code> symbol).</li><li>Use arrows to create outgoing conditions to new tasks or events.</li><li>Leave the default condition blank.</li><li>In all other arrows, use the <strong>Condition</strong> field to write a boolean expression.</li></ol><figure class=big-figure><a href=https://docs.rhize.com/images/bpmn/screenshot-rhize-bpmn-exclusive-gateway.png target=_blank><img src=https://docs.rhize.com/images/bpmn/screenshot-rhize-bpmn-exclusive-gateway.png alt="Screenshot showing how gateways create a Job order only if the material state is ready." width=70%></a><figcaption class=caption>This gateway creates a job order only if its material state is ready.</figcaption></figure><h3 id=parallel-gateways>Parallel gateways</h3><p>Represented by a <code>+</code> (plus sign) symbol, <em>parallel gateways</em> execute multiple tasks at the same time.
To use a parallel gateway:</p><ol><li>Select a gateway.</li><li>Use the wrench sign to change its condition to parallel.</li><li>Use arrows to create parallel conditions.</li></ol><p>When the workflow runs, each parallel branch executes at the same time.</p><figure class=big-figure><a href=https://docs.rhize.com/images/bpmn/screenshot-rhize-bpmn-parallel-gateway.png target=_blank><img src=https://docs.rhize.com/images/bpmn/screenshot-rhize-bpmn-parallel-gateway.png alt="Simultaneously add a record to the database and send an alert" width=50%></a><figcaption class=caption>Simultaneously add a record to the database and send an alert</figcaption></figure><h2 id=trigger-workflows>Trigger workflows</h2><p>You have multiple ways to trigger a start condition.</p><ul><li><strong>API triggers</strong> come from a GraphQL call to the Rhize DB.</li><li><strong>Message triggers</strong> subscribe to a topic on the Rhize broker and run whenever an event is published to that topic.</li><li><strong>Rule triggers</strong> subscribe to the topics on a remote data source, such as an edge OPC-UA server or MQTT broker.</li><li><strong>Timer triggers</strong> start according to some schedule (once or repeating).</li></ul><p>To learn more, read <a href=https://docs.rhize.com/how-to/bpmn/trigger-workflows/>Trigger workflows</a>.</p><h2 id=reuse-workflows>Reuse workflows</h2><p>BPMN workflows are <em>composable</em>, where each element can be reused by others.
For example, you might create a workflow that calculates common statistics, or one that makes a specified call to an external system.
Using <em>call activities</em> other workflows can reuse the workflow.</p><figure class=big-figure><a href=https://docs.rhize.com/images/bpmn/diagram-rhize-bpmn-call-activity.png target=_blank><img src=https://docs.rhize.com/images/bpmn/diagram-rhize-bpmn-call-activity.png alt="A call activity" width=55%></a><figcaption class=caption>An example of a main workflow calling a function. <a href=https://github.com/libremfg/rhize-templates/tree/main/bpmn/call-activity-calculate-stats>Template</a></figcaption></figure><p>To reuse a workflow:</p><ol><li>Drag the task element (rectangle) into the workflow.</li><li>Select the wrench icon.</li><li>Select <strong>Call Activity</strong>.</li><li>Configure it according to the <a href=https://docs.rhize.com/how-to/bpmn/bpmn-elements/#call-activities>call activity parameters</a>.</li></ol><h2 id=access-process-variable-context>Access process variable context</h2><p>As data passes through the nodes of a workflow, the nodes share access to a variable space.
Nodes can access these variables, create new variables, and mutate existing ones.
This overall variable object is called <em>process variable context</em>.</p><p>When working with variables, keep the following in mind:</p><ul><li><p><strong>Access the root variable context through <code>$.</code></strong>.</p><p>This follows the conventions of JSONata.
For details and examples, read <a href=https://docs.rhize.com/how-to/bpmn/use-jsonata/>Use JSONata</a>.</p></li><li><p><strong>Access nested properties with dot notation.</strong></p><p>For example, the following is a reference to the first item in the <code>orders</code> object in the variable context:</p><pre tabindex=0><code>$.orders[]
</code></pre></li><li><p><strong>You can store a node&rsquo;s output in a variable.</strong></p><p>Many output fields offer a way to create a variable.
For example, the JSON schema field has two variables that you can name,
one that outputs a boolean based on whether the input is valid, and another that outputs
the error string if the variable is invalid.</p><p>You can access these variables in later nodes (unless you mutate them).</p></li><li><p><strong>Variables.</strong></p><p>If you direct output to a variable that already exists, the new value overwrites the old one.
This behavior can be used to manage the overall memory footprint of a workflow.</p></li><li><p><strong>The maximum context size is configurable.</strong></p><p>By default, the process variable context has a maximum size of 1MB.
When an activity outputs data, the output is added to the process variable context.
When variable size gets large, you have multiple strategies to reduce its size (besides mutating variables).
For ideas, refer to <a href=https://docs.rhize.com/how-to/bpmn/tune-performance/>Tune BPMN performance</a>.</p></li><li><p><strong>You can trace variable context.</strong></p><p>For details, refer to the <a href=https://docs.rhize.com/how-to/bpmn/debug-workflows/>Debug guide</a>.</p></li></ul><h2 id=examples>Examples</h2><p>Rhize has a repository of templates that you can import and use in your system.
Use these to explore how the key functionality works.
<a href=https://github.com/libremfg/bpmn-templates>Rhize BPMN templates</a></p></article><div class=right-toc><nav id=TableOfContents><ul><li><a href=#request-and-send-data>Request and send data</a><ul><li><a href=#interact-with-the-rhize-api>Interact with the Rhize API</a></li><li><a href=#interact-with-external-systems>Interact with external systems</a></li><li><a href=#publish-and-subscribe>Publish and subscribe</a></li></ul></li><li><a href=#transform-and-calculate>Transform and calculate</a></li><li><a href=#control-flows>Control flows</a><ul><li><a href=#exclusive-gateway>Exclusive gateway.</a></li><li><a href=#parallel-gateways>Parallel gateways</a></li></ul></li><li><a href=#trigger-workflows>Trigger workflows</a></li><li><a href=#reuse-workflows>Reuse workflows</a></li><li><a href=#access-process-variable-context>Access process variable context</a></li><li><a href=#examples>Examples</a></li></ul></nav></div></div></main><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script><script src=https://docs.rhize.com/js/clipboard.min.js></script><script src=https://docs.rhize.com/js/dgraph.js?a9873668f1334ff6c49d4edea0a4bc38></script><script>hljs.initHighlightingOnLoad()</script></body></html>